{
  if (!map.isEmpty()) {
    buffer.addChar(OPEN_BRACE);
    boolean firstItem=true;
    for (    Map.Entry<?,?> entry : map.entrySet()) {
      if (entry.getKey() == null) {
        throw new IllegalArgumentException("Maps with null keys can\'t be converted to JSON");
      }
      if (!firstItem) {
        buffer.addChar(COMMA);
      }
 else {
        firstItem=false;
      }
      buffer.addJsonFieldName(entry.getKey().toString());
      writeObject(entry.getValue(),buffer);
    }
    buffer.addChar(CLOSE_BRACE);
  }
 else {
    buffer.addChars(EMPTY_MAP_CHARS);
  }
}
